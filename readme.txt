=== Cackle Fork ===
Contributors: Denis Golovachev, Cackle, ansidium
Tags: cackle, comments, social, vk, comments integration
Requires at least: 6.0
Tested up to: 6.8.2
Stable tag: 4.40
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

== Summary ==
Легкая интеграция виджетов Cackle в WordPress: комментарии, счетчики и инструменты модерации. Этот репозиторий — поддерживаемый форк оригинального плагина Cackle с исправлениями безопасности и совместимости PHP 8 / WordPress 6.

== Особенности ==
- подключение основного виджета комментариев и счетчика Cackle;
- экспорт локальных комментариев из WordPress в Cackle и обратная синхронизация;
- защита AJAX-запросов nonce-токенами и проверкой прав;
- загрузка всех скриптов по HTTPS без небезопасных протоколов;
- обновленный административный интерфейс без устаревших API.

== Требования ==
- WordPress 6.0 или новее;
- PHP 8.0+ (рекомендуется 8.4.12);
- активная учетная запись на cackle.me с ключами siteId, accountApiKey и siteApiKey.

== Установка ==
1. Скопируйте каталог плагина в `wp-content/plugins/cackle`.
2. Активируйте «Cackle Fork» через «Плагины» в админ-панели WordPress.
3. Откройте «Комментарии → Cackle» и введите ваши ключи Cackle.
4. Нажмите «Activate». При необходимости включите экспорт и синхронизацию.

== Конфигурация ==
- Enable SSO — включает авторизацию через Single Sign-On (требует платной опции Cackle).
- Enable sync — сохраняет копии комментариев Cackle в базе WordPress для SEO и резервирования.
- Counter — заменяет числовой счетчик на текстовое представление Cackle.
- Counter rubrics — переключает формат счетчика между числом и словоформой.
- Export comments / Sync comments — фоновые задания для миграции уже существующих комментариев.

== Безопасность ==
- Все взаимодействия с cackle.me выполняются через WordPress HTTP API с проверкой кодов ответа.
- AJAX-запросы разрешены только администраторам и защищены `wp_ajax` + nonce.
- Выводимые данные проходят экранирование для защиты от XSS.

== Обновления ==
= 4.40 =
- Совместимость с WordPress 6.8.2 и PHP 8.4.
- Перевод HTTP-запросов на HTTPS и WordPress HTTP API.
- Переписанный обработчик AJAX с валидацией nonce и JSON.
- Безопасный вывод шаблонов комментариев и счетчиков, удаление inline-редиректов.
- Упрощенная админ-панель, локализация настроек и выдача nonce для клиента Angular.
- Исправлен расчет дат комментариев без устаревшего `strftime`.

== Поддержка ==
Форк развивается сообществом. Пожалуйста, создавайте issues и пул-реквесты в GitHub-репозитории: https://github.com/ansidium/cackle
